extends layout_user.pug
block nestHead
    script(src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js")
block content
    div(class="lg:w-10/12")
        h1(class="text-2xl font-bold mb-6 text-center") List Products
        div(class="w-full flex justify-between content-center flex-wrap")
            // Search form
            form(class="md:w-10/12 mb-6 px-8 flex justify-start gap-4 flex-wrap" type="GET" action="/")
                input(type="text" name="name" placeholder="Search by name" value=`${name}` class="p-2 border border-gray-600 rounded-md")
                input(type="text" name="tag" placeholder="Search by tag" value=`${tag}` class="p-2 border border-gray-600 rounded-md")
                input(type="text" name="category" placeholder="Search by category" value=`${category}` class="p-2 border border-gray-600 rounded-md")
                button(type="submit" onclick="searchProducts()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-500") Search

        // The scrollable overflow container
        div(class="overflow-x-auto  p-2 bg-white shadow-inner rounded-lg")
            // Responsive grid layout
            div(class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4")
                each product in products
                    // The card
                    div.w-full.bg-neutral-200.shadow-lg.rounded-lg.overflow-hidden.flex.flex-col
                        a(href=`product/${product._id}`)
                            img(class="w-full.h-40.sm:h-48.md:h-56.lg:h-64.object-cover" src=`/image/${product.img_id}` alt="Product Image")
                        .p-4.flex-grow
                            h2.text-lg.font-bold.text-gray-800.mb-2 #{product.name}
                            p.text-sm.text-gray-600.mb-2 Category:&#x20;
                                span.text-blue-600.font-semibold #{product.category}
                            div.flex.flex-wrap.gap-2.mb-4
                                each tag in product.tags
                                    span.inline-block.bg-gray-200.text-gray-700.text-xs.px-2.py-1.rounded-full.border-gray-500.border #{tag}
                            div.flex.items-center.justify-between.mb-4
                                span.text-xl.font-bold.text-gray-800 $#{product.price}
                            div.flex.items-center.justify-between
                                span.text-blue-500.text-sm sales: #{product.timesPurchased}